import obin:lang:_map
import string
from datatype import TypeDerived

extend Map
    with Eq = TypeDerived
    with Collection = TypeDerived
    with Sized = TypeDerived
    with Str
        def str self ->
            fun _joiner pair ->
                str pair.0 ++ "=" ++ repr pair.1
            end
            (
                "{"
                    ++ string:join_with _joiner (to_seq self) ", " ++
                "}"
            )
    with Repr
    with Seqable
        def to_seq self -> _map:to_list self
