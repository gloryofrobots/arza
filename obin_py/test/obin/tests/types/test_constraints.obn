import affirm

generic
    t1 self
    t2 self

interface T1 (t1)
interface T2 (t2)

trait Trait1
    def t1 self -> self

trait Trait2 of T1
    def t2 self -> self

type X x

fun test () ->
    //EQ is auto derived
    affirm:is_not_throw lam () -> obin:lang:defimplement Ord X [[#<=, lam a b -> a.x<=b.x end]] end ()
    affirm:is_not_throw lam () -> obin:lang:defimplement Eq X [[#==, lam a b -> a.x==b.x end]] end ()

    affirm:is_throw lam () -> obin:lang:defimplement T2 X [[#t2, lam self -> self end]] end ()
    affirm:is_throw lam () -> obin:lang:defimplement T1 X [[#t2, lam self -> self end]] end ()
    affirm:is_not_throw lam () -> obin:lang:defimplement T1 X [[#t1, lam self -> self end]] end ()
    affirm:is_throw lam () -> obin:lang:defimplement T1 X [[#t1, lam self -> self end]] end ()
    affirm:is_not_throw lam () -> obin:lang:defimplement T2 X [[#t2, lam self -> self end]] end ()

