import seq
import var
import affirm
import iter

fun test () ->
    v = var:var 0
    l = iter:list_generator lam () -> 42

    affirm:is_equal (seq:take 5 l) [42, 42, 42, 42, 42]

    l1 = iter:list_generator lam () ->
                                if !v == 5 ->
                                    throw StopIterationError ()
                                else ->
                                    old = !v
                                    v := old + 1
    affirm:is_equal  (seq:take 7 l1) [1, 2, 3, 4, 5]

