trait Trait1 for self
    def f1 self
    def f2 self

trait Trait2 for self
    def f3 self
    def f4 self

MixinTrait1 = {
    f1 = lam x -> x
    f2 = lam x -> x
}

type Type1 val1
type Type2 val2

extend Type1
    with Trait1 = MixinTrait1
    with Trait2
        def f3 = MixinTrait1.f1
        def f4 self -:> self

extend Type2
    with Trait1 = methods Trait1 Type1
    with Trait2
        def f3 = identity
        def f4 = (methods Trait1 Type1).f1

