import io
import affirm
import seq
import list
import array
import string
import tests



fun ping
    | (0, pong_pid) =
        pong_pid(#finished)
        PL("ping finished")
    | (n, pong_pid) =
        pong_pid((#ping, self()))
        receive
            | #pong  = PL("ping received pong")
        ping(n-1, pong_pid)


fun pong() =
    receive
        | #finished = PL("pong finished")
        | (#ping, ping_pid) =
            PL("pong received ping")
            ping_pid(#pong)
            pong()

fun main() =
//    let
//        pong_pid = process(pong, ())
//        ping_pid = process(ping, (3, pong_pid))
//    in
//        ()
    tests:run()
