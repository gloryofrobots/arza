import lalan:lang:_map
import string
import std

extend Map with
(
    def {==, !=, put,  del, elem, len, is_empty} from std:Behavior

    def repr(self) = str(self)

    def str(self) =
        let fun _joiner((fst, snd)) =
            str(fst) ++ "=" ++ repr(snd)
        in "{"
                ++ string:join_with(_joiner, to_seq(self), ", ") ++
           "}"

    def to_seq(self) = _map:to_list(self)
)
