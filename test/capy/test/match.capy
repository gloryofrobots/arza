fun map(seq, acc, fn):
    match seq.seq():
    as nil = acc
    as hd::tail =
       acc.append(fn(hd))
       map(tail, acc, fn)


fun main():
    a = [1, 2, 3, 4, 5, 6]
    a1 = map(a.seq(), [], fun(x): x + 10)
    affirm.is_equal(a1, [11, 12, 13, 14, 15, 16])

    print(
        match [1,2,3]:
        as [1, ...rest] = rest
    )
    print(
        match [1,2,3].seq():
        as x::xs = [x, xs]
    )


