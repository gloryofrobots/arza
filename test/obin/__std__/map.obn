import obin:lang:_map
import string
import derive

extend Map (
    use derive:TEq
    use derive:TCollection
    use derive:TSized
    use TRepr

    def str(self) =
        let fun _joiner((fst, snd)) =
            str(fst) ++ "=" ++ repr(snd)
        in "{"
                ++ string:join_with(_joiner, to_seq(self), ", ") ++
           "}"

    def to_seq(self) = _map:to_list(self)
)
