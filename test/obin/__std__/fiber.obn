from obin:lang:_fiber import (spawn, activate, coroutine)
import derive

extend Fiber (
    use derive:TStr
    use derive:TRepr
    use derive:TEq
)


extend Coroutine (
    use derive:TSized (is_empty)
    def len(self) = throw NotImplementedError ("Coroutine can't define len")

    def first(self) = self()
    def rest(self) = self
    def to_seq(self) = self
    def empty(self) = []
)