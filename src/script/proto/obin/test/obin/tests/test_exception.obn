def test ->
    def error(reason) ->
        throw (:error, {reason=reason}) end

    try
        1/0
    catch e
        print("ERROR", e)
    end
    try
        nil
    catch e
        print("ERROR", e)
    end

    x =
    try
        print("IN TRY")
        error(:TestError)
    catch e
        print("CATCH")
        print(e)
    finally
        print("Finally")
        42
    end

    print(x)

    try
        print(asdsadasda)
    catch e
        print(e)
    finally
        42
    end
end
