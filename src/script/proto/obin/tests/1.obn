x = `+`(1,2)
print(x)
x = `+`(1.0,2.0)
print(x)
x = `+`(1,2.0)
print(x)

A = [1,2,3,4,5,6]
print(length(A))

fn coroutine(func) {
    (fiber1, fiber2) = spawn_fiber()
    first_call = false
    return fn(...args) {
        outer first_call
        if first_call == false {
            first_call = true
            activate_fiber(fiber2, fn(){
                func(fiber1, ...args)
            })
        } else {
            fiber2(...args)
        }
    }
}

 co = coroutine(fn(yield, x) {
           Z = "1111"

           _co1 = coroutine(fn(yield2, y) {
               Y = "2222"
               fn send() {
                    X = "3333"
                    yield2(42 + y)
               }
               send()
           })

        print("x", x)
        v = _co1(x)
        t = yield(v)
        print("t", t)
        x = yield(t)
        print("x", x)
        return x
      })

print(co(23))
print(co(34))
print(co(44))


print(filter(func(x) x % 2 end, 0,
             map(func(x) x * x end,
                    range(1, 6))))

pipe_last(range(1,6), map(func(x) x * x end), filter(func(x) x % 2 end, 0), print)
